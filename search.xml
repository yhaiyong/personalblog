<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Spring</title>
      <link href="/2022/08/07/Spring/"/>
      <url>/2022/08/07/Spring/</url>
      
        <content type="html"><![CDATA[<h2 id="一、Spring简介"><a href="#一、Spring简介" class="headerlink" title="一、Spring简介"></a>一、Spring简介</h2><h3 id="1-Spring课程介绍"><a href="#1-Spring课程介绍" class="headerlink" title="1 Spring课程介绍"></a>1 Spring课程介绍</h3><h4 id="问题导入"><a href="#问题导入" class="headerlink" title="问题导入"></a>问题导入</h4><p>我们为什么要学习Spring框架？</p><h4 id="1-1-为什么要学"><a href="#1-1-为什么要学" class="headerlink" title="1.1 为什么要学"></a>1.1 为什么要学</h4><ul><li><p>Spring技术是JavaEE开发必备技能，企业开发技术选型命中率&gt;==90%==</p></li><li><p>专业角度</p><ul><li>==<strong>简化开发</strong>==，降低企业级开发的复杂性</li><li><strong>==框架整合==</strong>，高效整合其他技术，提高企业级应用开发与运行效率</li></ul></li></ul><p><img src="assets/image-20210729171139088.png" alt="image-20210729171139088"></p><h4 id="1-2-学什么"><a href="#1-2-学什么" class="headerlink" title="1.2 学什么"></a>1.2 学什么</h4><ul><li><p>简化开发</p><ul><li>==IOC(反转控制)==</li><li>==AOP(面向切面编程)==<ul><li>==事务处理==</li></ul></li></ul></li><li><p>框架整合</p><ul><li>MyBatis</li><li>MyBatis-plus</li><li>Struts</li><li>Struts2</li><li>Hibernate</li><li>……</li></ul></li></ul><h4 id="1-3-怎么学"><a href="#1-3-怎么学" class="headerlink" title="1.3 怎么学"></a>1.3 怎么学</h4><ul><li>学习Spring框架设计思想</li><li>学习基础操作，思考操作与思想间的联系</li><li>学习案例，熟练应用操作的同时，体会思想</li></ul><p><img src="assets/image-20210729171346022.png" alt="image-20210729171346022"></p><h3 id="2-初识Spring"><a href="#2-初识Spring" class="headerlink" title="2 初识Spring"></a>2 初识Spring</h3><h4 id="问题导入-1"><a href="#问题导入-1" class="headerlink" title="问题导入"></a>问题导入</h4><p>目前我们使用的是Spring几版本？</p><h4 id="2-1-Spring家族"><a href="#2-1-Spring家族" class="headerlink" title="2.1 Spring家族"></a>2.1 Spring家族</h4><ul><li>官网：<a href="https://spring.io">https://spring.io</a></li><li>Spring发展到今天已经形成了一种开发的生态圈，Spring提供了若干个项目，每个项目用于完成特定的功能。</li></ul><p><img src="assets/image-20210729171850181.png" alt="image-20210729171850181"></p><h4 id="2-2-Spring发展史"><a href="#2-2-Spring发展史" class="headerlink" title="2.2 Spring发展史"></a>2.2 Spring发展史</h4><p><img src="assets/image-20210729171926576.png" alt="image-20210729171926576"></p><h3 id="3-Spring体系结构"><a href="#3-Spring体系结构" class="headerlink" title="3 Spring体系结构"></a>3 Spring体系结构</h3><h4 id="问题导入-2"><a href="#问题导入-2" class="headerlink" title="问题导入"></a>问题导入</h4><p>通过系统架构图，Spring能不能进行数据层开发？Spring能不能进行web层开发？</p><h4 id="3-1-Spring-Framework系统架构图"><a href="#3-1-Spring-Framework系统架构图" class="headerlink" title="3.1 Spring Framework系统架构图"></a>3.1 Spring Framework系统架构图</h4><ul><li>Spring Framework是Spring生态圈中最基础的项目，是其他项目的根基</li></ul><p><img src="assets/image-20210729172153796.png" alt="image-20210729172153796"></p><p><img src="assets/image-20210729172352627.png" alt="image-20210729172352627"></p><h4 id="3-2-Spring-Framework课程学习路线"><a href="#3-2-Spring-Framework课程学习路线" class="headerlink" title="3.2 Spring Framework课程学习路线"></a>3.2 Spring Framework课程学习路线</h4><p><img src="assets/image-20210729172513669.png" alt="image-20210729172513669"></p><h3 id="4-Spring核心概念"><a href="#4-Spring核心概念" class="headerlink" title="4 Spring核心概念"></a>4 Spring核心概念</h3><h4 id="问题导入-3"><a href="#问题导入-3" class="headerlink" title="问题导入"></a>问题导入</h4><p>问题1：目前我们的代码存在什么问题以及怎么解决这些问题？</p><p>问题2：请描述什么是IOC，什么是DI？</p><h4 id="4-1-目前我们代码存在的问题"><a href="#4-1-目前我们代码存在的问题" class="headerlink" title="4.1 目前我们代码存在的问题"></a>4.1 目前我们代码存在的问题</h4><p><img src="assets/image-20210729173516149.png" alt="image-20210729173516149"></p><ul><li>代码书写现状<ul><li>耦合度偏高</li></ul></li><li>解决方案<ul><li>使用对象时，在程序中不要主动使用new产生对象，转换为由外部提供对象</li></ul></li></ul><h4 id="4-2-核心概念"><a href="#4-2-核心概念" class="headerlink" title="4.2 核心概念"></a>4.2 核心概念</h4><ul><li><p>==IOC（Inversion of Control）控制反转==</p><p>使用对象时，由主动new产生对象转换为<strong>由==外部==提供对象</strong>，此过程中对象创建控制权由程序转移到外部，此思想称为控制反转。通俗的讲就是“==将new对象的权利交给Spring，我们从Sprin g中获取对象使用即可==”</p></li><li><p>Spring技术对IoC思想进行了实现</p><ul><li>Spring提供了一个容器，称为==IOC容器==，用来充当IoC思想中的“外部”</li><li>IOC容器负责对象的创建、初始化等一系列工作，被创建或被管理的对象在IoC容器中统称为==Bean==</li></ul></li><li><p>==DI（Dependency Injection）依赖注入==</p><ul><li>在容器中建立bean与bean之间的依赖关系的整个过程，称为依赖注入。</li></ul></li></ul><p><img src="assets/image-20210729174148134.png" alt="image-20210729174148134"></p><ul><li>目标：充分解耦<ul><li>使用IoC容器管理bean（IOC)</li><li>在IoC容器内将有依赖关系的bean进行关系绑定（DI）</li></ul></li><li>最终效果<ul><li>使用对象时不仅可以直接从IoC容器中获取，并且获取到的bean已经绑定了所有的依赖关系</li></ul></li></ul><h2 id="二、IOC和DI入门案例【重点】"><a href="#二、IOC和DI入门案例【重点】" class="headerlink" title="二、IOC和DI入门案例【重点】"></a>二、IOC和DI入门案例【重点】</h2><h3 id="1-IOC入门案例【重点】"><a href="#1-IOC入门案例【重点】" class="headerlink" title="1 IOC入门案例【重点】"></a>1 IOC入门案例【重点】</h3><h4 id="问题导入-4"><a href="#问题导入-4" class="headerlink" title="问题导入"></a>问题导入</h4><p>\<bean>标签中id属性和class属性的作用是什么？</p><h4 id="1-1-门案例思路分析"><a href="#1-1-门案例思路分析" class="headerlink" title="1.1 门案例思路分析"></a>1.1 门案例思路分析</h4><ol><li>管理什么？(Service与Dao)</li><li>如何将被管理的对象告知IOC容器？(配置文件)</li><li>被管理的对象交给IOC容器，如何获取到IoC容器？(接口)</li><li>IOC容器得到后，如何从容器中获取bean？(接口方法)</li><li>使用Spring导入哪些坐标？(pom.xml)</li></ol><h4 id="1-2-实现步骤"><a href="#1-2-实现步骤" class="headerlink" title="1.2 实现步骤"></a>1.2 实现步骤</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">【第一步】导入Spring坐标</span><br><span class="line">【第二步】定义Spring管理的类（接口）</span><br><span class="line">【第三步】创建Spring配置文件，配置对应类作为Spring管理的bean对象</span><br><span class="line">【第四步】初始化IOC容器（Spring核心容器/Spring容器），通过容器获取bean对象</span><br></pre></td></tr></table></figure><h4 id="1-3-实现代码"><a href="#1-3-实现代码" class="headerlink" title="1.3 实现代码"></a>1.3 实现代码</h4><p><strong>【第一步】导入Spring坐标</strong></p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--导入spring的坐标spring-context，对应版本是5.2.10.RELEASE--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>【第二步】定义Spring管理的类（接口）</strong></p><ul><li>BookDao接口和BookDaoImpl实现类</li></ul><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao save ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>BookService接口和BookServiceImpl实现类</li></ul><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">BookService</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">BookDao</span> <span class="variable">bookDao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BookDaoImpl</span>();</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book service save ...&quot;</span>);</span><br><span class="line">        bookDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>【第三步】创建Spring配置文件，配置对应类作为Spring管理的bean对象</strong></p><ul><li>定义applicationContext.xml配置文件并配置BookServiceImpl</li></ul><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">bean标签：表示配置bean</span></span><br><span class="line"><span class="comment">    id属性：表示给bean起名字</span></span><br><span class="line"><span class="comment">    class属性：表示给bean定义类型</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.service.impl.BookServiceImpl&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>==注意事项：bean定义时id属性在同一个上下文中(IOC容器中)不能重复==</strong></p><p><strong>【第四步】初始化IOC容器（Spring核心容器/Spring容器），通过容器获取Bean对象</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//1.创建IoC容器对象，加载spring核心配置文件</span></span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">        <span class="comment">//2 从IOC容器中获取Bean对象(BookService对象)</span></span><br><span class="line">        BookService bookService= (BookService)ctx.getBean(<span class="string">&quot;bookService&quot;</span>);</span><br><span class="line">        <span class="comment">//3 调用Bean对象(BookService对象)的方法</span></span><br><span class="line">        bookService.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1-4-运行结果"><a href="#1-4-运行结果" class="headerlink" title="1.4 运行结果"></a>1.4 运行结果</h4><p><img src="assets/image-20210729184337603.png" alt="image-20210729184337603"></p><h3 id="2-DI入门案例【重点】"><a href="#2-DI入门案例【重点】" class="headerlink" title="2 DI入门案例【重点】"></a>2 DI入门案例【重点】</h3><h4 id="问题导入-5"><a href="#问题导入-5" class="headerlink" title="问题导入"></a>问题导入</h4><p>\<property>标签中name属性和ref属性的作用是什么？</p><h4 id="2-1-DI入门案例思路分析"><a href="#2-1-DI入门案例思路分析" class="headerlink" title="2.1 DI入门案例思路分析"></a>2.1 DI入门案例思路分析</h4><ol><li>基于IOC管理bean</li><li>Service中使用new形式创建的Dao对象是否保留？(否)</li><li>Service中需要的Dao对象如何进入到Service中？(提供方法)</li><li>Service与Dao间的关系如何描述？(配置)</li></ol><h4 id="2-2-实现步骤"><a href="#2-2-实现步骤" class="headerlink" title="2.2 实现步骤"></a>2.2 实现步骤</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">【第一步】删除使用new的形式创建对象的代码</span><br><span class="line">【第二步】提供依赖对象对应的setter方法</span><br><span class="line">【第三步】配置service与dao之间的关系</span><br></pre></td></tr></table></figure><h4 id="2-3-实现代码"><a href="#2-3-实现代码" class="headerlink" title="2.3 实现代码"></a>2.3 实现代码</h4><p><strong>【第一步】删除使用new的形式创建对象的代码</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">BookService</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> BookDao bookDao;  <span class="comment">//【第一步】删除使用new的形式创建对象的代码</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book service save ...&quot;</span>);</span><br><span class="line">        bookDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>【第二步】提供依赖对象对应的setter方法</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">BookService</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> BookDao bookDao;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book service save ...&quot;</span>);</span><br><span class="line">        bookDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//【第二步】提供依赖对象对应的setter方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBookDao</span><span class="params">(BookDao bookDao)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.bookDao = bookDao;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>【第三步】配置service与dao之间的关系</strong></p><blockquote><p>在applicationContext.xml中配置</p></blockquote><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">bean标签：表示配置bean</span></span><br><span class="line"><span class="comment">    id属性：表示给bean起名字</span></span><br><span class="line"><span class="comment">    class属性：表示给bean定义类型</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.BookDaoImpl&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.service.impl.BookServiceImpl&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--配置server与dao的关系</span></span><br><span class="line"><span class="comment">property标签：表示配置当前bean的属性</span></span><br><span class="line"><span class="comment">        name属性：表示配置哪一个具体的属性</span></span><br><span class="line"><span class="comment">        ref属性：表示参照哪一个bean</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;bookDao&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="2-4-图解演示"><a href="#2-4-图解演示" class="headerlink" title="2.4 图解演示"></a>2.4 图解演示</h4><p><img src="assets/image-20210729183104748.png" alt="image-20210729183104748"></p><h2 id="三、Bean的基础配置"><a href="#三、Bean的基础配置" class="headerlink" title="三、Bean的基础配置"></a>三、Bean的基础配置</h2><h3 id="问题导入-6"><a href="#问题导入-6" class="headerlink" title="问题导入"></a>问题导入</h3><p>问题1：在\<bean>标签上如何配置别名？</p><p>问题2：Bean的默认作用范围是什么？如何修改？</p><h3 id="1-Bean基础配置【重点】"><a href="#1-Bean基础配置【重点】" class="headerlink" title="1 Bean基础配置【重点】"></a>1 Bean基础配置【重点】</h3><h4 id="配置说明"><a href="#配置说明" class="headerlink" title="配置说明"></a>配置说明</h4><p><img src="assets/image-20210729183500978.png" alt="image-20210729183500978"></p><h4 id="代码演示"><a href="#代码演示" class="headerlink" title="代码演示"></a>代码演示</h4><blockquote><p>见《IOC入门案例》applicationContext.xml配置</p></blockquote><h4 id="运行结果"><a href="#运行结果" class="headerlink" title="运行结果"></a>运行结果</h4><blockquote><p>见《IOC入门案例》运行结果</p></blockquote><h3 id="2-Bean别名配置"><a href="#2-Bean别名配置" class="headerlink" title="2 Bean别名配置"></a>2 Bean别名配置</h3><h4 id="配置说明-1"><a href="#配置说明-1" class="headerlink" title="配置说明"></a>配置说明</h4><p><img src="assets/image-20210729183558051.png" alt="image-20210729183558051"></p><h4 id="代码演示-1"><a href="#代码演示-1" class="headerlink" title="代码演示"></a>代码演示</h4><p><img src="assets/image-20210729191924626.png" alt="image-20210729191924626"></p><h4 id="打印结果"><a href="#打印结果" class="headerlink" title="打印结果"></a>打印结果</h4><p><img src="assets/image-20210729191954870.png" alt="image-20210729191954870"></p><h3 id="3-Bean作用范围配置【重点】"><a href="#3-Bean作用范围配置【重点】" class="headerlink" title="3 Bean作用范围配置【重点】"></a>3 Bean作用范围配置【重点】</h3><h4 id="配置说明-2"><a href="#配置说明-2" class="headerlink" title="配置说明"></a>配置说明</h4><p><img src="assets/image-20210729183628138.png" alt="image-20210729183628138"></p><blockquote><p>扩展：scope的取值不仅仅只有singleton和prototype，还有request、session、application、 websocket ，表示创建出的对象放置在web容器(tomcat)对应的位置。比如：request表示保存到request域中。</p></blockquote><h4 id="代码演示-2"><a href="#代码演示-2" class="headerlink" title="代码演示"></a>代码演示</h4><p><img src="assets/image-20210729192420048.png" alt="image-20210729192420048"></p><h4 id="打印结果-1"><a href="#打印结果-1" class="headerlink" title="打印结果"></a>打印结果</h4><p><img src="assets/image-20210729192730871.png" alt="image-20210729192730871"></p><blockquote><p>最后给大家说明一下：在我们的实际开发当中，绝大部分的Bean是单例的，也就是说绝大部分Bean不需要配置scope属性。</p></blockquote><h2 id="四、Bean的实例化"><a href="#四、Bean的实例化" class="headerlink" title="四、Bean的实例化"></a>四、Bean的实例化</h2><h3 id="问题导入-7"><a href="#问题导入-7" class="headerlink" title="问题导入"></a>问题导入</h3><p>Bean的实例化方式有几种？</p><h3 id="1-Bean是如何创建的【理解】"><a href="#1-Bean是如何创建的【理解】" class="headerlink" title="1 Bean是如何创建的【理解】"></a>1 Bean是如何创建的【理解】</h3><p>bean本质上就是对象，创建bean使用构造方法完成</p><h3 id="2-实例化Bean的三种方式"><a href="#2-实例化Bean的三种方式" class="headerlink" title="2 实例化Bean的三种方式"></a>2 实例化Bean的三种方式</h3><h4 id="2-1-构造方法方式【重点】"><a href="#2-1-构造方法方式【重点】" class="headerlink" title="2.1 构造方法方式【重点】"></a>2.1 构造方法方式【重点】</h4><ul><li>BookDaoImpl实现类</li></ul><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BookDaoImpl</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao constructor is running ....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao save ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>applicationContext.xml配置</li></ul><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--方式一：构造方法实例化bean--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.BookDaoImpl&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><ul><li>AppForInstanceBook测试类</li></ul><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppForInstanceBook</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">BookDao</span> <span class="variable">bookDao</span> <span class="operator">=</span> (BookDao) ctx.getBean(<span class="string">&quot;bookDao&quot;</span>);</span><br><span class="line"></span><br><span class="line">        bookDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>运行结果</li></ul><p><img src="assets/image-20210729194137151.png" alt="image-20210729194137151"></p><p>==注意：无参构造方法如果不存在，将抛出异常<code>BeanCreationException</code>==</p><h4 id="2-2-静态工厂方式"><a href="#2-2-静态工厂方式" class="headerlink" title="2.2 静态工厂方式"></a>2.2 静态工厂方式</h4><ul><li>OrderDao接口和OrderDaoImpl实现类</li></ul><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">OrderDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OrderDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">OrderDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;order dao save ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>OrderDaoFatory工厂类</li></ul><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//静态工厂创建对象</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OrderDaoFactory</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> OrderDao <span class="title function_">getOrderDao</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;factory setup....&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">OrderDaoImpl</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>applicationContext.xml配置</li></ul><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--方式二：使用静态工厂实例化bean--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;orderDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.factory.OrderDaoFactory&quot;</span> <span class="attr">factory-method</span>=<span class="string">&quot;getOrderDao&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><p><img src="assets/image-20210729195248948.png" alt="image-20210729195248948"></p><ul><li>AppForInstanceOrder测试类</li></ul><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppForInstanceOrder</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">OrderDao</span> <span class="variable">orderDao</span> <span class="operator">=</span> (OrderDao) ctx.getBean(<span class="string">&quot;orderDao&quot;</span>);</span><br><span class="line"></span><br><span class="line">        orderDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>运行结果</li></ul><p><img src="assets/image-20210729195009198.png" alt="image-20210729195009198"></p><h4 id="2-3-实例工厂方式"><a href="#2-3-实例工厂方式" class="headerlink" title="2.3 实例工厂方式"></a>2.3 实例工厂方式</h4><ul><li>UserDao接口和UserDaoImpl实现类</li></ul><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;user dao save ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>UserDaoFactory工厂类</li></ul><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//实例工厂创建对象</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoFactory</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> UserDao <span class="title function_">getUserDao</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">UserDaoImpl</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>applicationContext.xml配置</li></ul><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--方式三：使用实例工厂实例化bean--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userFactory&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.factory.UserDaoFactory&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">factory-method</span>=<span class="string">&quot;getUserDao&quot;</span> <span class="attr">factory-bean</span>=<span class="string">&quot;userFactory&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><p><img src="assets/image-20210729200203249.png" alt="image-20210729200203249"></p><ul><li>AppForInstanceUser测试类</li></ul><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppForInstanceUser</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//        //创建实例工厂对象</span></span><br><span class="line">        <span class="comment">//        UserDaoFactory userDaoFactory = new UserDaoFactory();</span></span><br><span class="line">        <span class="comment">//        //通过实例工厂对象创建对象</span></span><br><span class="line">        <span class="comment">//        UserDao userDao = userDaoFactory.getUserDao();</span></span><br><span class="line">        <span class="comment">//        userDao.save();</span></span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">        <span class="type">UserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> (UserDao) ctx.getBean(<span class="string">&quot;userDao&quot;</span>);</span><br><span class="line">        userDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>运行结果</li></ul><p><img src="assets/image-20210729200240820.png" alt="image-20210729200240820"></p><h4 id="2-4-实现FactoryBean-方式【扩展-了解】"><a href="#2-4-实现FactoryBean-方式【扩展-了解】" class="headerlink" title="2.4 实现FactoryBean\方式【扩展,了解】"></a>2.4 实现FactoryBean\<T>方式【扩展,了解】</h4><ul><li>定义UserDaoFactoryBean实现FactoryBean\<UserDao></li></ul><blockquote><p>UserDaoFactoryBean中实例化什么类型的对象泛型就是该类型。</p></blockquote><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//FactoryBean创建对象</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoFactoryBean</span> <span class="keyword">implements</span> <span class="title class_">FactoryBean</span>&lt;UserDao&gt; &#123;</span><br><span class="line">    <span class="comment">//代替原始实例工厂中创建对象的方法</span></span><br><span class="line">    <span class="keyword">public</span> UserDao <span class="title function_">getObject</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">UserDaoImpl</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Class&lt;?&gt; getObjectType() &#123;</span><br><span class="line">        <span class="keyword">return</span> UserDao.class;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>applicationContext.xml配置</li></ul><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--方式四：使用FactoryBean实例化bean--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.factory.UserDaoFactoryBean&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>使用之前的AppForInstanceUser测试类去运行看结果就行了。注意配置文件中id=”userDao”是否重复。</p></blockquote><h2 id="五、Bean的生命周期【了解】"><a href="#五、Bean的生命周期【了解】" class="headerlink" title="五、Bean的生命周期【了解】"></a>五、Bean的生命周期【了解】</h2><h3 id="问题导入-8"><a href="#问题导入-8" class="headerlink" title="问题导入"></a>问题导入</h3><p>问题1：多例的Bean能够配置并执行销毁的方法？</p><p>问题2：如何做才执行Bean销毁的方法？</p><h3 id="1-生命周期相关概念介绍"><a href="#1-生命周期相关概念介绍" class="headerlink" title="1 生命周期相关概念介绍"></a>1 生命周期相关概念介绍</h3><ul><li>生命周期：从创建到消亡的完整过程</li><li>bean生命周期：bean从创建到销毁的整体过程</li><li>bean生命周期控制：在bean创建后到销毁前做一些事情</li></ul><h3 id="2-代码演示"><a href="#2-代码演示" class="headerlink" title="2 代码演示"></a>2 代码演示</h3><h4 id="2-1-Bean生命周期控制"><a href="#2-1-Bean生命周期控制" class="headerlink" title="2.1 Bean生命周期控制"></a>2.1 Bean生命周期控制</h4><ul><li>提供生命周期控制方法</li></ul><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao save ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//表示bean初始化对应的操作</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;init...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//表示bean销毁前对应的操作</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destory</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;destory...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>applicationContext.xml配置</li></ul><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--init-method：设置bean初始化生命周期回调函数,此处填写init方法名--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--destroy-method：设置bean销毁生命周期回调函数，仅适用于单例对象，此处填写destory方法名--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.BookDaoImpl&quot;</span> <span class="attr">init-method</span>=<span class="string">&quot;init&quot;</span> <span class="attr">destroy-method</span>=<span class="string">&quot;destory&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><ul><li>测试类</li></ul><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppForLifeCycle</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">( String[] args )</span> &#123;</span><br><span class="line">        <span class="comment">//此处需要使用实现类类型，接口类型没有close方法</span></span><br><span class="line">        <span class="type">ClassPathXmlApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">        <span class="type">BookDao</span> <span class="variable">bookDao</span> <span class="operator">=</span> (BookDao) ctx.getBean(<span class="string">&quot;bookDao&quot;</span>);</span><br><span class="line">        bookDao.save();</span><br><span class="line">        <span class="comment">//关闭容器，执行销毁的方法</span></span><br><span class="line">        ctx.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-2-Bean生命周期控制"><a href="#2-2-Bean生命周期控制" class="headerlink" title="2.2 Bean生命周期控制"></a>2.2 Bean生命周期控制</h4><ul><li>实现InitializingBean, DisposableBean接口</li></ul><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">BookService</span>, InitializingBean, DisposableBean &#123;</span><br><span class="line">    <span class="keyword">private</span> BookDao bookDao;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBookDao</span><span class="params">(BookDao bookDao)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;set .....&quot;</span>);</span><br><span class="line">        <span class="built_in">this</span>.bookDao = bookDao;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book service save ...&quot;</span>);</span><br><span class="line">        bookDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;service destroy&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterPropertiesSet</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;service init&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>测试类代码同《3.2.1 Bean生命周期控制》中的测试代码</p></blockquote><h3 id="3-Bean销毁时机"><a href="#3-Bean销毁时机" class="headerlink" title="3 Bean销毁时机"></a>3 Bean销毁时机</h3><ul><li>容器关闭前触发bean的销毁</li><li>关闭容器方式：<ul><li>手工关闭容器<br><code>ConfigurableApplicationContext</code>接口<code>close()</code>操作</li><li>注册关闭钩子，在虚拟机退出前先关闭容器再退出虚拟机<br><code>ConfigurableApplicationContext</code>接口<code>registerShutdownHook()</code>操作</li></ul></li></ul><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppForLifeCycle</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">( String[] args )</span> &#123;</span><br><span class="line">        <span class="comment">//此处需要使用实现类类型，接口类型没有close方法</span></span><br><span class="line">        <span class="type">ClassPathXmlApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">BookDao</span> <span class="variable">bookDao</span> <span class="operator">=</span> (BookDao) ctx.getBean(<span class="string">&quot;bookDao&quot;</span>);</span><br><span class="line">        bookDao.save();</span><br><span class="line">        <span class="comment">//注册关闭钩子函数，在虚拟机退出之前回调此函数，关闭容器</span></span><br><span class="line">        ctx.registerShutdownHook();</span><br><span class="line">        <span class="comment">//关闭容器</span></span><br><span class="line">        <span class="comment">//ctx.close();</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="六、依赖注入-DI配置"><a href="#六、依赖注入-DI配置" class="headerlink" title="六、依赖注入(DI配置)"></a>六、依赖注入(DI配置)</h2><h3 id="1-依赖注入方式【重点】"><a href="#1-依赖注入方式【重点】" class="headerlink" title="1 依赖注入方式【重点】"></a>1 依赖注入方式【重点】</h3><h4 id="问题导入-9"><a href="#问题导入-9" class="headerlink" title="问题导入"></a>问题导入</h4><p>依赖注入有几种方式？</p><h4 id="1-1-依赖注入的两种方式"><a href="#1-1-依赖注入的两种方式" class="headerlink" title="1.1 依赖注入的两种方式"></a>1.1 依赖注入的两种方式</h4><ul><li>setter注入<br>简单类型<br>==<strong>引用类型(很常用)</strong>==</li><li>构造器注入<br>简单类型<br>引用类型</li></ul><h4 id="1-2-setter方式注入"><a href="#1-2-setter方式注入" class="headerlink" title="1.2 setter方式注入"></a>1.2 setter方式注入</h4><h5 id="问题导入-10"><a href="#问题导入-10" class="headerlink" title="问题导入"></a>问题导入</h5><p>setter方式注入使用什么子标签？</p><h5 id="引用类型"><a href="#引用类型" class="headerlink" title="引用类型"></a>引用类型</h5><p><img src="assets/image-20210729203626540.png" alt="image-20210729203626540"></p><h5 id="简单类型"><a href="#简单类型" class="headerlink" title="简单类型"></a>简单类型</h5><p><img src="assets/image-20210729203728173.png" alt="image-20210729203728173"></p><h4 id="1-3-构造方式注入"><a href="#1-3-构造方式注入" class="headerlink" title="1.3 构造方式注入"></a>1.3 构造方式注入</h4><h5 id="问题导入-11"><a href="#问题导入-11" class="headerlink" title="问题导入"></a>问题导入</h5><p>构造方式注入使用什么子标签？</p><h5 id="引用类型-1"><a href="#引用类型-1" class="headerlink" title="引用类型"></a>引用类型</h5><p><img src="assets/image-20210729203859855.png" alt="image-20210729203859855"></p><h5 id="简单类型-1"><a href="#简单类型-1" class="headerlink" title="简单类型"></a>简单类型</h5><p><img src="assets/image-20210729204006542.png" alt="image-20210729204006542"></p><h5 id="参数适配【了解】"><a href="#参数适配【了解】" class="headerlink" title="参数适配【了解】"></a>参数适配【了解】</h5><p><img src="assets/image-20210729204117697.png" alt="image-20210729204117697"></p><h4 id="1-4-依赖注入方式选择"><a href="#1-4-依赖注入方式选择" class="headerlink" title="1.4 依赖注入方式选择"></a>1.4 依赖注入方式选择</h4><ol><li>强制依赖使用构造器进行，使用setter注入有概率不进行注入导致null对象出现</li><li>可选依赖使用setter注入进行，灵活性强</li><li>Spring框架倡导使用构造器，第三方框架内部大多数采用构造器注入的形式进行数据初始化，相对严谨</li><li>如果有必要可以两者同时使用，使用构造器注入完成强制依赖的注入，使用setter注入完成可选依赖的注入</li><li>实际开发过程中还要根据实际情况分析，如果受控对象没有提供setter方法就必须使用构造器注入</li><li><strong>==自己开发的模块推荐使用setter注入==</strong></li></ol><h3 id="2-依赖自动装配【理解】"><a href="#2-依赖自动装配【理解】" class="headerlink" title="2 依赖自动装配【理解】"></a>2 依赖自动装配【理解】</h3><h4 id="问题导入-12"><a href="#问题导入-12" class="headerlink" title="问题导入"></a>问题导入</h4><p>如何配置按照类型自动装配？</p><h4 id="2-1-自动装配概念"><a href="#2-1-自动装配概念" class="headerlink" title="2.1 自动装配概念"></a>2.1 自动装配概念</h4><ul><li>IoC容器根据bean所依赖的资源在容器中自动查找并注入到bean中的过程称为自动装配</li><li>自动装配方式<br>==按类型（常用）==<br>按名称<br>按构造方法<br>不启用自动装配</li></ul><h4 id="2-2-自动装配类型"><a href="#2-2-自动装配类型" class="headerlink" title="2.2 自动装配类型"></a>2.2 自动装配类型</h4><h5 id="依赖自动装配"><a href="#依赖自动装配" class="headerlink" title="依赖自动装配"></a>依赖自动装配</h5><blockquote><p>配置中使用bean标签autowire属性设置自动装配的类型</p></blockquote><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.BookDaoImpl&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.service.impl.BookServiceImpl&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byType&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><h5 id="依赖自动装配特征"><a href="#依赖自动装配特征" class="headerlink" title="依赖自动装配特征"></a>依赖自动装配特征</h5><ol><li>自动装配用于引用类型依赖注入，不能对简单类型进行操作</li><li>使用按类型装配时（byType）必须保障容器中相同类型的bean唯一，推荐使用</li><li>使用按名称装配时（byName）必须保障容器中具有指定名称的bean，因变量名与配置耦合，不推荐使用</li><li>自动装配优先级低于setter注入与构造器注入，同时出现时自动装配配置失效</li></ol><h3 id="3-集合注入"><a href="#3-集合注入" class="headerlink" title="3 集合注入"></a>3 集合注入</h3><h4 id="3-1-注入数组类型数据"><a href="#3-1-注入数组类型数据" class="headerlink" title="3.1 注入数组类型数据"></a>3.1 注入数组类型数据</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;array&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>100<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>200<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>300<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="3-2-注入List类型数据"><a href="#3-2-注入List类型数据" class="headerlink" title="3.2 注入List类型数据"></a>3.2 注入List类型数据</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;list&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>itcast<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>itheima<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>boxuegu<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>chuanzhihui<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="3-3-注入Set类型数据"><a href="#3-3-注入Set类型数据" class="headerlink" title="3.3 注入Set类型数据"></a>3.3 注入Set类型数据</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;set&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>itcast<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>itheima<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>boxuegu<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>boxuegu<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="3-4-注入Map类型数据"><a href="#3-4-注入Map类型数据" class="headerlink" title="3.4 注入Map类型数据"></a>3.4 注入Map类型数据</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;country&quot;</span> <span class="attr">value</span>=<span class="string">&quot;china&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;province&quot;</span> <span class="attr">value</span>=<span class="string">&quot;henan&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;city&quot;</span> <span class="attr">value</span>=<span class="string">&quot;kaifeng&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="3-5-注入Properties类型数据"><a href="#3-5-注入Properties类型数据" class="headerlink" title="3.5 注入Properties类型数据"></a>3.5 注入Properties类型数据</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;properties&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">props</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;country&quot;</span>&gt;</span>china<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;province&quot;</span>&gt;</span>henan<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;city&quot;</span>&gt;</span>kaifeng<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>说明：property标签表示setter方式注入，构造方式注入constructor-arg标签内部也可以写\<array>、\<list>、\<set>、\<map>、\<props>标签</p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
